## 工程搭建
### 1 Flask对象初始化参数

Flask 程序实例在创建的时候，需要默认传入当前Flask程序所指定的包（模块），接下来就来详细查看一下Flask应用程序在创建的时候一些需要我们关注的参数：

- import_name
	+ Flask程序所在的包(模块)，传```__name__```就可以
	+ 其可以决定Flask在访问静态文件时查找的路径
- static_url_path
	+ 静态文件访问路径，可以不传，默认为：/ + static_folder
- static_folder
	+ 静态文件存储的文件夹，可以不传，默认为__static__
- template_folder
	+ 模板文件存储的文件夹，可以不传，默认为__templates__
### 2 应用程序配置参数
对于Flask对象初始化参数仅仅设置的Flask本身的属性，比如：
- flask从哪里读取静态文件

- flask从哪里读取模板文件

- .... 

  等等

  应用程序配置参数设置的是一个Web应用工程的相关信息，比如：

- 数据库的连接信息

- 日志的配置信息

- 自定义的配置信息

- ......
等等

#### 作用
集中管理项目的所有配置信息

#### 使用方式
Django 将所有的配置信息都放到settings.py 文件中，而Flask则不同
__Flask将配置信息保存到了app.config属性中，该属性可以按照字典类型进行操作。__

#### 读取
- app.config.get(name)
- app.config[name]
#### 设置
主要使用一下三种方式
- __从配置对象中加载__
	```app.config.from_object(配置对象)```
	
	```python
	class DefaultConfig(object):
    """默认配置"""
    SECRET_KEY = "@haha0420"
    
	app = Flask(__name__)
	
	app.config.from_object(DefaultConfig)
	
	@app.route('/')
	def hello_world():
    	print(app.config["SECRET_KEY"])
    	return 'Hello World!'
	```
	应用场景
	作为默认配置写在程序代码中
	可以继承
	```python
	class DevelopmentConfig(DefaultConfig):
		DEBUG=True
	```
	+ 继承 --> 优点 复用
	+ 敏感数据暴露
	
- __从配置文件加载__
	```app.config.from_pyfile(配置文件)```
	新建一个配置文件setting.py
	```SECRET_KEY = "@haha0420"```
	在Flask程序文件中
	```python
	app = Flask(__name__)
	
	app.config.from_pyfile('setting.py')
	
	@app.route('/')
	def hello_world():
    	print(app.config["SECRET_KEY"])
    	return 'Hello World!'
	```
	应用场景：
	在项目中使用固定的配置文件
	
- __从环境变量中加载__
	__Flask使用环境变量加载配置的本质是通过环境变量找到配置文件，再读取配置文件的信息，其使用方式为
	
	环境变量的值为配置文件的绝对路径
	先在终端中执行如下命令
	```export PROJECT_SETTING='~/setting.py'```
	
	```python
	app.config.from_envvar('环境变量名')
	app = Flask(__name__)
	
	app.config.from_envvar('PROJECT_SETTING', silent=True)
	
	@app.route('/')
	def hello_world():
		print(app.config["SECRET_KEY"])
		return 'Hello World!'
	```
### 3 app.run 参数
可以指定运行的IP地址，端口，是否开启调试模式
```app.run(host='0.0.0.0', post=8000, debug=True)```
# 路由与蓝图
## 路由
### 1 查询路由信息
- 命令行方式
	```flask routes```
- 在程序中获取
	在应用中的url_map属性中保存着整个Flask应用的路由映射信息，可以通过读取这个属性获取路由信息
	```print(app.url_map)```
	如果想在程序中遍历路由信息，可以采用如下方式
	```python
	# 需要遍历url_map 取出特定信息 在一个特定接口返回
	for rule in app.url_map.iter_rules():
    	print("name={} path={}".format(rule.endpoint, rule.rule))
  ```
    __需求__ 
    通过访问/ 地址，以json的方式返回应用内所有路由信息
    ```python
	@app.route('/')
	def route_map():
    	"""
    	主视图 返回所有视图网址
    	:return:
    	"""
      rules_iterator = app.url_map.iter_rules()
    	return json.dumps({rule.endpoint: rule.rule for rule in rules_iterator})
	  ```
### 2 指定请求方式
在Flask中，定义路由其默认的请求方式为：
- GET
- OPTIONS(自带)
- HEAD(自带)
利用__methods__参数可以自己指定一个接口的请求方式
## 蓝图
### 使用方式
使用蓝图可以分为三个步骤
1. 创建一个蓝图对象

   ```python
   user_bp=Blueprint('user', __name__)
   ```

   

2. 在这个蓝图对象上进行操作，注册路由，指定静态文件夹，注册模板过滤器

   ```py
   @user_bp.route('/')
   def user_profile():
   	return 'user_profile'
   ```

3. 在应用对象上注册这个蓝图对象

   ```pyth
   app.register_blueprint(user_bp)
   ```

   



















